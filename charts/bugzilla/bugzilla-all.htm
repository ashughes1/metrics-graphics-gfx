<div class='row trunk-section' style='margin-top:-60px'>
  <div class='col-lg-12 text-left'>
    <div class='col-lg-4 text-left' id='bugzilla_reports' title='Bugs reported by date (click to enlarge)' onclick='focus_chart("bugzilla-reports")'></div>
    <div class='col-lg-4 text-left' id='bugzilla_crashes_by_date' title='Bugs reported representing crashes (click to enlarge)' onclick='focus_chart("bugzilla-crashes-by-date")'></div>
    <div class='col-lg-4 text-left' id='bugzilla_uplifts' title='Uplift Approvals (click to enlarge)' onclick='focus_chart("bugzilla-uplifts")'></div>
  </div>
  <div class='col-lg-12 text-left'>
    <div class='col-lg-4 text-left' id='bugzilla_unresolved' title='Unresolved Bugs Over Time (click to enlarge)' onclick='focus_chart("bugzilla-unresolved-by-component")'></div>
    <div class='col-lg-4 text-left' id='bugzilla_fixed_total' title='Total time to fix bugs (click to enlarge)' onclick='focus_chart("bugzilla-fixed-bug-age")'></div>
    <div class='col-lg-4 text-left' id='bugzilla_fixed_average' title='Average time to fix bugs (click to enlarge)' onclick='focus_chart("bugzilla-fixed-bug-age")'></div>
  </div>
  <div class='col-lg-12 text-left'>
    <div class='col-lg-3 text-left' id='bugzilla_postrelease_reported' title='Bugs reported post-release (click to enlarge)' onclick='focus_chart("bugzilla-postrelease")'></div>
    <div class='col-lg-3 text-left' id='bugzilla_postrelease_resolved' title='Bugs resolved post-release (click to enlarge)' onclick='focus_chart("bugzilla-postrelease")'></div>
    <div class='col-lg-3 text-left' id='bugzilla_crashes_by_version_reported' title='Bugs reported representing crashes (click to enlarge)' onclick='focus_chart("bugzilla-crashes-reported-by-version")'></div>
    <div class='col-lg-3 text-left' id='bugzilla_crashes_by_version_resolved' title='Bugs resolved representing crashes (click to enlarge)' onclick='focus_chart("bugzilla-crashes-resolved-by-version")'></div>
  </div>
</div>

<script>
    MG._hooks = {};
    d3.json('data/bugzilla/bugzilla-gfx-by-date.json', function(data) {
        data = MG.convert.date(data, 'date');
        MG.data_graphic({
            data: data,
            title: "Reported Bugs",
            width: 390,
            height: 220,
            right: 50,
            target: document.getElementById('bugzilla_reports'),
            x_accessor: "date",
            y_accessor: ["reported","resolved","duped","reopened"],
            legend:["Reported","Resolved","Duped","Reopened"],
            interpolate: "monotone",
            chart_type: "line",
            markers: [{
              'date': new Date('2015-01-13T00:00:00.000Z'),
              'label': '35'
            },{
              'date': new Date('2015-02-24T00:00:00.000Z'),
              'label': '36'
            },{
              'date': new Date('2015-03-30T00:00:00.000Z'),
              'label': '37'
            },{
              'date': new Date('2015-05-12T00:00:00.000Z'),
              'label': '38'
            },{
              'date': new Date('2015-06-29T00:00:00.000Z'),
              'label': '39'
            },{
              'date': new Date('2015-08-11T00:00:00.000Z'),
              'label': '40'
            },{
              'date': new Date('2015-09-21T00:00:00.000Z'),
              'label': '41'
            },{
              'date': new Date('2015-11-03T00:00:00.000Z'),
              'label': '42'
            },{
              'date': new Date('2015-12-15T00:00:00.000Z'),
              'label': '43'
            },{
              'date': new Date('2016-01-26T00:00:00.000Z'),
              'label': '44'
            },{
              'date': new Date('2016-03-08T00:00:00.000Z'),
              'label': '45'
            }]
        });
    });
</script>

<script>
    MG._hooks = {};
    d3.json('data//bugzilla/bugzilla-crashes.json', function(data) {
        data = MG.convert.date(data, 'date');
        MG.data_graphic({
            data: data,
            title: "Crash Bugs",
            width: 390,
            height: 220,
            right: 50,
            target: document.getElementById('bugzilla_crashes_by_date'),
            x_accessor: "date",
            y_accessor: ["reported","resolved"],
            legend:["Reported","Resolved"],
            interpolate: "monotone",
            chart_type: "line",
            markers: [{
              'date': new Date('2015-01-13T00:00:00.000Z'),
              'label': '35'
            },{
              'date': new Date('2015-02-24T00:00:00.000Z'),
              'label': '36'
            },{
              'date': new Date('2015-03-30T00:00:00.000Z'),
              'label': '37'
            },{
              'date': new Date('2015-05-12T00:00:00.000Z'),
              'label': '38'
            },{
              'date': new Date('2015-06-29T00:00:00.000Z'),
              'label': '39'
            },{
              'date': new Date('2015-08-11T00:00:00.000Z'),
              'label': '40'
            },{
              'date': new Date('2015-09-21T00:00:00.000Z'),
              'label': '41'
            },{
              'date': new Date('2015-11-03T00:00:00.000Z'),
              'label': '42'
            },{
              'date': new Date('2015-12-15T00:00:00.000Z'),
              'label': '43'
            },{
              'date': new Date('2016-01-26T00:00:00.000Z'),
              'label': '44'
            },{
              'date': new Date('2016-03-08T00:00:00.000Z'),
              'label': '45'
            }]
        });
    });
</script>

<script>
MG._hooks = {};
d3.json('data/bugzilla/bugzilla-uplifts.json', function(data) {
    data = MG.convert.date(data, 'date');
    MG.data_graphic({
        data: data,
        title: "Uplifts",
        width: 390,
        height: 220,
        right: 50,
        target: document.getElementById('bugzilla_uplifts'),
        x_accessor: "date",
        y_accessor: ["release","beta","aurora"],
        legend:["Release","Beta","Aurora"],
        interpolate: "monotone",
        chart_type: "line",
        markers: [{
              'date': new Date('2015-01-13T00:00:00.000Z'),
              'label': '35'
            },{
              'date': new Date('2015-02-24T00:00:00.000Z'),
              'label': '36'
            },{
              'date': new Date('2015-03-30T00:00:00.000Z'),
              'label': '37'
            },{
              'date': new Date('2015-05-12T00:00:00.000Z'),
              'label': '38'
            },{
              'date': new Date('2015-06-29T00:00:00.000Z'),
              'label': '39'
            },{
              'date': new Date('2015-08-11T00:00:00.000Z'),
              'label': '40'
            },{
              'date': new Date('2015-09-21T00:00:00.000Z'),
              'label': '41'
            },{
              'date': new Date('2015-11-03T00:00:00.000Z'),
              'label': '42'
            },{
              'date': new Date('2015-12-15T00:00:00.000Z'),
              'label': '43'
            },{
              'date': new Date('2016-01-26T00:00:00.000Z'),
              'label': '44'
            },{
              'date': new Date('2016-03-08T00:00:00.000Z'),
              'label': '45'
            }]
    });
});
</script>

<!-- Fixed Bug Age -->
<script>
    MG._hooks = {};

    d3.json('data/bugzilla/bugzilla-unresolved-by-component.json', function(data) {
      data = MG.convert.date(data, 'date');
      MG.data_graphic({
        data: data,
        title: "Unresolved Bugs",
        width: 390,
        height: 220,
        right: 50,
        target: document.getElementById('bugzilla_unresolved'),
        x_accessor: "date",
        xax_count:4,
        y_accessor: "Total",
        interpolate: "monotone",
        chart_type: "line"
      });
    });

    d3.json('data/bugzilla/fixed_bug_age.json', function(data) {
        MG.data_graphic({
            data: data,
            title: "Days to Fix (Total)",
            width: 390,
            height: 220,
            right: 50,
            target: document.getElementById('bugzilla_fixed_total'),
            x_accessor: "date",
            y_accessor: "days_total",
            interpolate: "monotone",
            chart_type: "line"
        });
        MG.data_graphic({
            data: data,
            title: "Days to Fix (Average)",
            width: 390,
            height: 220,
            right: 50,
            target: document.getElementById('bugzilla_fixed_average'),
            x_accessor: "date",
            y_accessor: "days_avg",
            interpolate: "monotone",
            chart_type: "line"
        });
    });
</script>

<!-- POST-RELEASE BUGS -->
<script>
    MG._hooks = {};
    d3.json('data/bugzilla/bugzilla-postrelease.json', function(data) {
      var summary_data = []
      for (i=0; i<(data.length/4); i++) {
        summary_data[i] = data[i]
        summary_data[i]['release'] = summary_data[i]['release'].toString()
      }
      MG.data_graphic({
          data: summary_data,
          title: "Post-release Reports",
          width: 292,
          height: 300,
          right: 40,
          target: document.getElementById('bugzilla_postrelease_reported'),
          x_accessor:"reported",
          y_accessor:"release",
          interpolate: "monotone",
          chart_type: "bar"
      });
      MG.data_graphic({
          data: summary_data,
          title: "Post-release Fixes",
          width: 292,
          height: 300,
          right: 40,
          target: document.getElementById('bugzilla_postrelease_resolved'),
          x_accessor:"resolved",
          y_accessor:"release",
          interpolate: "monotone",
          chart_type: "bar"
      });
    });
</script>

<!-- CRASH BUGS -->
<script>
d3.json('data//bugzilla/bugzilla-crashes-by-version.json', function(data) {
  var summary_data = []
  for (i=0; i<(data.length/4); i++) {
    summary_data[i] = data[i]
    summary_data[i]['release'] = summary_data[i]['release'].toString()
  }
  MG.data_graphic({
      data: summary_data,
      title: "Reported Crash Bugs",
      width: 292,
      height: 300,
      right: 40,
      target: document.getElementById('bugzilla_crashes_by_version_reported'),
      y_accessor: "release",
      x_accessor: "reported",
      interpolate: "monotone",
      chart_type: "bar"
  });
  MG.data_graphic({
      data: summary_data,
      title: "Fixed Crash Bugs",
      width: 292,
      height: 300,
      right: 40,
      target: document.getElementById('bugzilla_crashes_by_version_resolved'),
      y_accessor: "release",
      x_accessor: "resolved",
      interpolate: "monotone",
      chart_type: "bar"
  });
});
</script>

<script>
function focus_chart(chart) {
  $('#trunk').load('charts/bugzilla/' + chart + '.htm', function() {
    $('pre code').each(function(i, block) {
      hljs.highlightBlock(block);
    });
  });
}
</script>
